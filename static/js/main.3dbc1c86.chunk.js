(this.webpackJsonptodoist=this.webpackJsonptodoist||[]).push([[0],{17:function(e,t,a){e.exports=a(27)},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(15),r=a(1),l=a(2),d=a(3),s=a.n(d),i=a(16),u=a.n(i),m=(a(23),u.a.initializeApp({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/todoist-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/todoist-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).authDomain,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/todoist-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).databaseURL,projectId:"todo-ist-clone-ce1f2",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/todoist-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/todoist-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).messagingSenderId,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/todoist-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).appId})),E=a(8),b=[{key:"INBOX",name:"Inbox"},{key:"TODAY",name:"Today"},{key:"NEXT_7",name:"Next 7 Days"}],j=function(e){return b.find((function(t){return t.key===e}))},k=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=[];return function(){for(var a=(new Date).getTime(),n=new Array(8),c=7;c>=0;c--)n[c]=e.charAt(a%64),a=Math.floor(a/64);var o=n.join("");for(c=0;c<12;c++)o+=e.charAt(t[c]);return o}}(),p=Object(n.createContext)(),f=function(e){var t=e.children,a=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){m.firestore().collection("projects").where("userId","==","jlIFXIwyAL3tzHMtzRbw").orderBy("projectId").get().then((function(e){var t=e.docs.map((function(e){return Object(E.a)(Object(E.a)({},e.data()),{},{docId:e.id})}));JSON.stringify(t)!==JSON.stringify(a)&&c(t)}))}),[a]),{projects:a,setProjects:c}}(),o=a.projects,l=a.setProjects;return c.a.createElement(p.Provider,{value:{projects:o,setProjects:l}},t)},_=function(){return Object(n.useContext)(p)},v=Object(n.createContext)(),O=function(e){var t=e.children,a=Object(n.useState)("INBOX"),o=Object(r.a)(a,2),l=o[0],d=o[1];return c.a.createElement(v.Provider,{value:{selectedProject:l,setSelectedProject:d}},t)},y=function(){return Object(n.useContext)(v)},S=function(e){var t=e.setProject,a=e.showProjectOverlay,n=e.setShowProjectOverlay,o=_().projects;return o&&a&&c.a.createElement("div",{className:"project-overlay","data-testid":"project-overlay"},c.a.createElement("ul",{className:"project-overlay__list"},o.map((function(e){return c.a.createElement("li",{key:e.projectId},c.a.createElement("div",{"data-testid":"project-overlay-action",onClick:function(){t(e.projectId),n(!1)},onKeyDown:function(a){"Enter"===a.key&&(t(e.projectId),n(!1))},role:"button",tabIndex:0,"aria-label":"Select the task project"},e.name))}))))},D=function(e){var t=e.setTaskDate,a=e.showTaskDate,n=e.setShowTaskDate;return a&&c.a.createElement("div",{className:"task-date","data-testid":"task-date-overlay"},c.a.createElement("ul",{className:"task-date__list"},c.a.createElement("li",null,c.a.createElement("div",{onClick:function(){n(!1),t(s()().format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(n(!1),t(s()().format("DD/MM/YYYY")))},"data-testid":"task-date-today",tabIndex:0,"aria-label":"Select today as the task date",role:"button"},c.a.createElement("span",null,c.a.createElement(l.h,null)),c.a.createElement("span",null,"Today"))),c.a.createElement("li",null,c.a.createElement("div",{onClick:function(){n(!1),t(s()().add(1,"day").format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(n(!1),t(s()().add(1,"day").format("DD/MM/YYYY")))},"data-testid":"task-date-tomorrow",role:"button",tabIndex:0,"aria-label":"Select tomorrow as the task date"},c.a.createElement("span",null,c.a.createElement(l.i,null)),c.a.createElement("span",null,"Tomorrow"))),c.a.createElement("li",null,c.a.createElement("div",{onClick:function(){n(!1),t(s()().add(7,"days").format("DD/MM/YYYY"))},onKeyDown:function(e){"Enter"===e.key&&(n(!1),t(s()().add(7,"days").format("DD/MM/YYYY")))},"data-testid":"task-date-next-week","aria-label":"Select next week as the task date",tabIndex:0,role:"button"},c.a.createElement("span",null,c.a.createElement(l.g,null)),c.a.createElement("span",null,"Next week")))))},h=function(e){var t=e.showAddTaskMain,a=void 0===t||t,o=e.shouldShowMain,d=void 0!==o&&o,i=e.showQuickAddTask,u=e.setShowQuickAddTask,E=Object(n.useState)(""),b=Object(r.a)(E,2),j=b[0],k=b[1],p=Object(n.useState)(""),f=Object(r.a)(p,2),_=f[0],v=f[1],O=Object(n.useState)(""),h=Object(r.a)(O,2),N=h[0],T=h[1],w=Object(n.useState)(d),I=Object(r.a)(w,2),C=I[0],x=I[1],Y=Object(n.useState)(!1),P=Object(r.a)(Y,2),K=P[0],M=P[1],A=Object(n.useState)(!1),g=Object(r.a)(A,2),L=g[0],R=g[1],W=y().selectedProject,B=function(){var e=N||W,t="";return"TODAY"===e?t=s()().format("DD/MM/YYYY"):"NEXT_7"===e&&(t=s()().add(7,"days").format("DD/MM/YYYY")),j&&e&&m.firestore().collection("tasks").add({archived:!1,projectId:e,task:j,date:t||_,userId:"jlIFXIwyAL3tzHMtzRbw"}).then((function(){k(""),T(""),x(""),M(!1)}))};return c.a.createElement("div",{className:i?"add-task add-task__overlay":"add-task","data-testid":"add-task-comp"},a&&c.a.createElement("div",{className:"add-task__shallow","data-testid":"show-main-action",onClick:function(){return x(!C)},onKeyDown:function(e){"Enter"===e.key&&x(!C)},tabIndex:0,"aria-label":"Add task",role:"button"},c.a.createElement("span",{className:"add-task__plus"},"+"),c.a.createElement("span",{className:"add-task__text"},"Add Task")),(C||i)&&c.a.createElement("div",{className:"add-task__main","data-testid":"add-task-main"},i&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{"data-testid":"quick-add-task"},c.a.createElement("h2",{className:"header"},"Quick Add Task"),c.a.createElement("span",{className:"add-task__cancel-x","data-testid":"add-task-quick-cancel","aria-label":"Cancel adding task",onClick:function(){x(!1),M(!1),u(!1)},onKeyDown:function(e){"Enter"===e.key&&(x(!1),M(!1),u(!1))},tabIndex:0,role:"button"},"X"))),c.a.createElement(S,{setProject:T,showProjectOverlay:K,setShowProjectOverlay:M}),c.a.createElement(D,{setTaskDate:v,showTaskDate:L,setShowTaskDate:R}),c.a.createElement("input",{className:"add-task__content","aria-label":"Enter your task","data-testid":"add-task-content",type:"text",value:j,onChange:function(e){return k(e.target.value)}}),c.a.createElement("button",{type:"button",className:"add-task__submit","data-testid":"add-task",onClick:function(){return i?B()&&u(!1):B()}},"Add Task"),!i&&c.a.createElement("span",{className:"add-task__cancel","data-testid":"add-task-main-cancel",onClick:function(){x(!1),M(!1)},onKeyDown:function(e){"Enter"===e.key&&(x(!1),M(!1))},"aria-label":"Cancel adding a task",tabIndex:0,role:"button"},"Cancel"),c.a.createElement("span",{className:"add-task__project","data-testid":"show-project-overlay",onClick:function(){return M(!K)},onKeyDown:function(e){"Enter"===e.key&&M(!K)},tabIndex:0,role:"button"},c.a.createElement(l.f,null)),c.a.createElement("span",{className:"add-task__date","data-testid":"show-task-date-overlay",onClick:function(){return R(!L)},onKeyDown:function(e){"Enter"===e.key&&R(!L)},tabIndex:0,role:"button"},c.a.createElement(l.e,null))))},N=function(e){var t=e.darkMode,a=e.setDarkMode,o=Object(n.useState)(!1),d=Object(r.a)(o,2),s=d[0],i=d[1],u=Object(n.useState)(!1),m=Object(r.a)(u,2),E=m[0],b=m[1];return c.a.createElement("header",{className:"header","data-testid":"header"},c.a.createElement("nav",null,c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"/images/logo.png",alt:"Todoist"})),c.a.createElement("div",{className:"settings"},c.a.createElement("ul",null,c.a.createElement("li",{className:"settings__add"},c.a.createElement("button",{"data-testid":"quick-add-task-action","aria-label":"Quick add task",type:"button",onClick:function(){b(!0),i(!0)}},"+")),c.a.createElement("li",{className:"settings__darkmode"},c.a.createElement("button",{"data-testid":"dark-mode-action","aria-label":"Darkmode on/off",type:"button",onClick:function(){return a(!t)}},c.a.createElement(l.c,null)))))),c.a.createElement(h,{showAddTaskMain:!1,shouldShowMain:s,showQuickAddTask:E,setShowQuickAddTask:b}))},T=a(7),w=function(e){var t=e.project,a=Object(n.useState)(!1),o=Object(r.a)(a,2),d=o[0],s=o[1],i=_(),u=i.projects,E=i.setProjects,b=y().setSelectedProject;return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"sidebar__dot"},"\u2022"),c.a.createElement("span",{className:"sidebar__project-name"},t.name),c.a.createElement("span",{className:"sidebar__project-delete","data-testid":"delete-project",onClick:function(){return s(!d)},onKeyDown:function(e){"Enter"===e.key&&s(!d)},tabIndex:0,role:"button","aria-label":"Confirm deletion of project"},c.a.createElement(l.j,null),d&&c.a.createElement("div",{className:"project-delete-modal"},c.a.createElement("div",{className:"project-delete-modal__inner"},c.a.createElement("p",null,"Are you sure you want to delete this project?"),c.a.createElement("button",{type:"button",onClick:function(){return e=t.docId,void m.firestore().collection("projects").doc(e).delete().then((function(){E(Object(T.a)(u)),b("INBOX")}));var e}},"Delete"),c.a.createElement("span",{onClick:function(){return s(!d)},onKeyDown:function(e){"Enter"===e.key&&s(!d)},tabIndex:0,role:"button","aria-label":"Cancel adding project, do not delete"},"Cancel")))))},I=function(e){var t=e.activeValue,a=void 0===t?null:t,o=Object(n.useState)(a),l=Object(r.a)(o,2),d=l[0],s=l[1],i=y().setSelectedProject,u=_().projects;return u&&u.map((function(e){return c.a.createElement("li",{key:e.projectId,"data-testid":"project-action-parent","data-doc-id":e.docId,className:d===e.projectId?"active sidebar__project":"sidebar__project"},c.a.createElement("div",{role:"button","data-testid":"project-action",tabIndex:0,"aria-label":"Select ".concat(e.name," as the task project"),onClick:function(){s(e.projectId),i(e.projectId)},onKeyDown:function(t){"Enter"===t.key&&(s(e.projectId),i(e.projectId))}},c.a.createElement(w,{project:e})))}))},C=function(e){var t=e.shouldShow,a=void 0!==t&&t,o=Object(n.useState)(a),l=Object(r.a)(o,2),d=l[0],s=l[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),E=u[0],b=u[1],j=k(),p=_(),f=p.projects,v=p.setProjects;return c.a.createElement("div",{className:"add-project","data-testid":"add-project"},d&&c.a.createElement("div",{className:"add-project__input","data-testid":"add-project-inner"},c.a.createElement("input",{value:E,onChange:function(e){return b(e.target.value)},className:"add-project__name","data-testid":"project-name",type:"text",placeholder:"Name your project"}),c.a.createElement("button",{className:"add-project__submit",type:"button",onClick:function(){return E&&m.firestore().collection("projects").add({projectId:j,name:E,userId:"jlIFXIwyAL3tzHMtzRbw"}).then((function(){v(Object(T.a)(f)),b(""),s(!1)}))},"data-testid":"add-project-submit"},"Add Project"),c.a.createElement("span",{"aria-label":"Cancel adding project","data-testid":"hide-project-overlay",className:"add-project__cancel",onClick:function(){return s(!1)},onKeyDown:function(e){"Enter"===e.key&&s(!1)},role:"button",tabIndex:0},"Cancel")),c.a.createElement("span",{className:"add-project__plus"},"+"),c.a.createElement("span",{"aria-label":"Add Project","data-testid":"add-project-action",className:"add-project__text",onClick:function(){return s(!d)},onKeyDown:function(e){"Enter"===e.key&&s(!d)},role:"button",tabIndex:0},"Add Project"))},x=function(){var e=y().setSelectedProject,t=Object(n.useState)("inbox"),a=Object(r.a)(t,2),o=a[0],d=a[1],s=Object(n.useState)(!0),i=Object(r.a)(s,2),u=i[0],m=i[1];return c.a.createElement("div",{className:"sidebar","data-testid":"sidebar"},c.a.createElement("ul",{className:"sidebar__generic"},c.a.createElement("li",{"data-testid":"inbox",className:"inbox"===o?"active":void 0},c.a.createElement("div",{"data-testid":"inbox-action","aria-label":"Show inbox tasks",tabIndex:0,role:"button",onClick:function(){d("inbox"),e("INBOX")},onKeyDown:function(t){"Enter"===t.key&&(d("inbox"),e("INBOX"))}},c.a.createElement("span",null,c.a.createElement(l.b,null)),c.a.createElement("span",null,"Inbox"))),c.a.createElement("li",{"data-testid":"today",className:"today"===o?"active":void 0},c.a.createElement("div",{"data-testid":"today-action","aria-label":"Show today's tasks",tabIndex:0,role:"button",onClick:function(){d("today"),e("TODAY")},onKeyDown:function(t){"Enter"===t.key&&(d("today"),e("TODAY"))}},c.a.createElement("span",null,c.a.createElement(l.d,null)),c.a.createElement("span",null,"Today"))),c.a.createElement("li",{"data-testid":"next_7",className:"next_7"===o?"active":void 0},c.a.createElement("div",{"data-testid":"next_7-action","aria-label":"Show tasks for the next 7 days",tabIndex:0,role:"button",onClick:function(){d("next_7"),e("NEXT_7")},onKeyDown:function(t){"Enter"===t.key&&(d("next_7"),e("NEXT_7"))}},c.a.createElement("span",null,c.a.createElement(l.e,null)),c.a.createElement("span",null,"Next 7 days")))),c.a.createElement("div",{className:"sidebar__middle","aria-label":"Show/hide projects",onClick:function(){return m(!u)},onKeyDown:function(e){"Enter"===e.key&&m(!u)},role:"button",tabIndex:0},c.a.createElement("span",null,c.a.createElement(l.a,{className:u?void 0:"hidden-projects"})),c.a.createElement("h2",null,"Projects")),c.a.createElement("ul",{className:"sidebar__projects"},u&&c.a.createElement(I,null)),u&&c.a.createElement(C,null))},Y=function(e){var t=e.id,a=e.taskDesc,n=function(){m.firestore().collection("tasks").doc(t).update({archived:!0})};return c.a.createElement("div",{className:"checkbox-holder","data-testid":"checkbox-action",onClick:function(){return n()},onKeyDown:function(e){"Enter"===e.key&&n()},"aria-label":"Mark ".concat(a," as done?"),role:"button",tabIndex:0},c.a.createElement("span",{className:"checkbox"}))},P=function(){var e=y().selectedProject,t=_().projects,a=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),d=Object(r.a)(l,2),i=d[0],u=d[1];return Object(n.useEffect)((function(){var t=m.firestore().collection("tasks").where("userId","==","jlIFXIwyAL3tzHMtzRbw");return t=(t=e&&!j(e)?t=t.where("projectId","==",e):"TODAY"===e?t=t.where("date","==",s()().format("DD/MM/YYYY")):"INBOX"===e||0===e?t=t.where("date","==",""):t).onSnapshot((function(t){var a=t.docs.map((function(e){return Object(E.a)({id:e.id},e.data())}));o("NEXT_7"===e?a.filter((function(e){return s()(e.date,"DD-MM-YYYY").diff(s()(),"days")<=7&&!0!==e.archived})):a.filter((function(e){return!0!==e.archived}))),u(a.filter((function(e){return!1!==e.archived})))})),function(){return t()}}),[e]),{tasks:c,archivedTasks:i}}(e).tasks,o="";return j(e)&&e&&(o=function(e,t){return e.find((function(e){return e.key===t}))}(b,e).name),t&&t.length>0&&e&&!j(e)&&(o=function(e,t){return e.find((function(e){return e.projectId===t}))}(t,e).name),Object(n.useEffect)((function(){document.title="".concat(o,": Todoist")})),c.a.createElement("div",{className:"tasks","data-testid":"tasks"},c.a.createElement("h2",{"data-testid":"project-name"},o),c.a.createElement("ul",{className:"tasks__list"},a.map((function(e){return c.a.createElement("li",{key:"".concat(e.id)},c.a.createElement(Y,{id:e.id,taskDesc:e.task}),c.a.createElement("span",null,e.task))}))),c.a.createElement(h,null))},K=function(){return c.a.createElement("section",{className:"content"},c.a.createElement(x,null),c.a.createElement(P,null))},M=function(e){var t=e.darkModeDefault,a=void 0!==t&&t,o=Object(n.useState)(a),l=Object(r.a)(o,2),d=l[0],s=l[1];return c.a.createElement(O,null,c.a.createElement(f,null,c.a.createElement("main",{"data-testid":"application",className:d?"darkmode":void 0},c.a.createElement(N,{darkMode:d,setDarkMode:s}),c.a.createElement(K,null))))};a(26);Object(o.render)(c.a.createElement(M,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.3dbc1c86.chunk.js.map